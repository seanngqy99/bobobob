<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Finger Touching Exercise</title>
    <link rel="stylesheet" href="../css/common/common.css" />
    <link rel="stylesheet" href="../css/pages/workout.css" />
    <link rel="stylesheet" href="../css/pages/handpose.css" />

    <!-- MediaPipe and TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-core"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-webgl"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/hand-pose-detection"></script>
  </head>
  <body>
    <header class="sticky-header">
      <nav>
        <div class="logo">RehabHero</div>
        <ul class="nav-links">
          <li><a href="../dashboard.html" class="active">Home</a></li>
          <li><a href="../exercise-library.html">Exercises</a></li>
          <li><a href="../profile.html">Profile</a></li>
          <li><a href="../teleconsultation.html">Teleconsultation</a></li>
          <li><a href="#" onclick="logout()">Logout</a></li>
        </ul>
        <div class="menu-toggle" onclick="toggleMenu()">&#9776;</div>
      </nav>
    </header>

    <div class="three-column-layout">
      <!-- Left column: user controls -->
      <div id="controls" class="left-column">
        <h2>Finger Touch Exercise</h2>
        <p>
          Touch your thumb to each finger in sequence. This exercise improves
          finger dexterity and coordination.
        </p>

        <!-- Hand selection -->
        <div class="radio-group">
          <label class="radio-label">
            <input type="radio" name="handSelect" value="left" checked /> Left
            Hand
          </label>
          <label class="radio-label">
            <input type="radio" name="handSelect" value="right" /> Right Hand
          </label>
          <label class="radio-label">
            <input type="radio" name="handSelect" value="both" /> Both Hands
          </label>
        </div>

        <!-- Rep and Set inputs (hidden) -->
        <input type="hidden" id="repInput" value="5" />
        <input type="hidden" id="setInput" value="3" />

        <!-- Start button -->
        <button id="startExercise">Start Exercise</button>

        <!-- Status / counters -->
        <p id="leftCountText"></p>
        <p id="rightCountText"></p>
        <p id="statusText">Waiting to start...</p>
      </div>

      <!-- Middle column: video feed -->
      <div class="middle-column" id="canvasContainer">
        <!-- Canvas will be added here by JS -->
        <div class="loading-overlay" id="loadingOverlay">
          <div class="spinner"></div>
          <p>Loading exercise...</p>
        </div>
      </div>

      <!-- Right column: exercise progress -->
      <div class="right-column">
        <div class="exercise-progress-card">
          <h3>Exercise Progress</h3>
          <div id="handProgress" class="rep-progress">
            <!-- Progress indicators will be added here by JS -->
          </div>
        </div>
      </div>
    </div>

    <!-- Script load at end of body -->
    <script src="../js/fingerexercise.js"></script>

    <!-- Common site functions -->
    <script>
      function toggleMenu() {
        document.querySelector(".nav-links").classList.toggle("show");
      }

      function logout() {
        // Implement logout functionality
        alert("Logout function would go here");
        window.location.href = "../index.html";
      }
    </script>
  </body>
</html>
